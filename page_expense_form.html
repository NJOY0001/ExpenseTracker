<div id="page-expense-form" class="page-container active">
    <div class="bg-white p-6 rounded-xl shadow-lg">
        <input type="hidden" id="editModeRefNo" value=""><h2 id="form-title" class="text-xl font-bold mb-6 border-b pb-4">ข้อมูลการจ่ายเงิน</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 mb-6">
            <div class="space-y-4">
                <div><label for="recordDate" class="block text-sm font-medium text-gray-700">วันที่บันทึกข้อมูล</label><input type="text" id="recordDate" readonly class="original-input bg-gray-100 w-full"></div>
                <div><label for="purchaseDate" class="block text-sm font-medium text-gray-700">วันที่ซื้อสินค้า</label><input type="date" id="purchaseDate" class="original-input w-full"></div>
                
                <!-- UPDATED: Supplier Name Dropdown with Add Button -->
                <div>
                    <label for="supplierName" class="block text-sm font-medium text-gray-700">Supplier Name</label>
                    <div class="flex items-center space-x-2 mt-1">
                        <select id="supplierName" class="original-input w-full">
                            <option value="">-- กำลังโหลด --</option>
                        </select>
                        <button id="createNewSupplierBtn" type="button" class="bg-blue-500 text-white p-2 rounded-md hover:bg-blue-600 flex-shrink-0"><i data-lucide="plus"></i></button>
                    </div>
                </div>

                <div><label for="docNo" class="block text-sm font-medium text-gray-700">Document No.</label><input type="text" id="docNo" placeholder="หมายเลขบิล" class="original-input w-full"></div>
                <div><label for="paymentType" class="block text-sm font-medium text-gray-700">ประเภทการจ่ายเงิน</label><select id="paymentType" class="original-input w-full"><option>Main account</option><option>Petty Cash</option></select></div>
                <div><label for="projectSubject" class="block text-sm font-medium text-gray-700">Project/Subject</label><input type="text" id="projectSubject" placeholder="โครงการ / เรื่อง" class="original-input w-full"></div>
            </div>
            <div class="space-y-4">
                <div><label for="internalRefNo" class="block text-sm font-medium text-gray-700">Internal Reference No.</label><input type="text" id="internalRefNo" readonly class="original-input bg-gray-100 w-full"></div>
                <div class="bg-gray-50 rounded-lg p-4 text-sm border space-y-2 mt-2">
                    <h3 class="font-bold text-base mb-2">สรุปมูลค่า</h3>
                    <div class="flex justify-between"><span>รวมมูลค่าสินค้า</span><span id="totalAmount" class="font-medium">฿0.00</span></div><div class="flex justify-between"><span>มูลค่าสินค้ามี VAT</span><span id="vatIncludedAmount" class="font-medium">฿0.00</span></div>
                    <div class="flex justify-between"><span>มูลค่าสินค้าไม่มี VAT</span><span id="vatExcludedAmount" class="font-medium">฿0.00</span></div><div class="flex justify-between"><span>รวม VAT 7%</span><span id="vatAmount" class="font-medium">฿0.00</span></div>
                    <div class="flex justify-between border-t pt-2 mt-2 text-base"><span class="font-bold">จำนวนเงินรวม</span><span id="grandTotal" class="font-bold text-blue-600">฿0.00</span></div>
                    <div class="flex justify-between border-t pt-2 mt-2 text-xs text-gray-500"><span>รายการ: <span id="totalItemCount">0</span></span><span>มีVat: <span id="vatableItemCount">0</span></span><span>ไม่มีVat: <span id="nonVatableItemCount">0</span></span></div>
                </div>
            </div>
        </div>
        <div class="overflow-x-auto"><table id="itemsTable" class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase w-10">#</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase w-2/5">รายการ</th><th class="px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase w-[10%]">จำนวน</th><th class="px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase w-[10%]">หน่วย</th><th class="px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase w-[15%]">ราคา/หน่วย</th><th class="px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase">ราคารวม</th><th class="px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase">VAT 7%</th><th class="px-2 py-3 text-center text-xs font-medium text-gray-500 uppercase w-16">VAT</th><th class="px-2 py-3 text-center text-xs font-medium text-gray-500 uppercase w-16">ลบ</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div>
        <button id="addRowBtn" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2"><i data-lucide="plus-circle" class="w-5 h-5"></i><span>เพิ่มรายการ</span></button>
        <div class="mt-8 flex justify-end space-x-4"><button id="cancelBtn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg">ยกเลิก</button><button id="saveBtn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg flex items-center justify-center"><span id="saveBtnText">บันทึกข้อมูล</span><div id="loader" class="loader hidden ml-2"></div></button></div>
    </div>
</div>
